---
title: "Quiz 2"
author: "George Papadopoulos </br> pgeorgios8@gmail.com"
date: "`r Sys.Date()`"
output:
  prettydoc::html_pretty:
    theme: leonids
    highlight: github
---
<style>body {text-align: justify}</style>
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,comment = "")
options(warn = -1)
```

## 1.

Register an application with the Github API here https://github.com/settings/applications.

Access the API to get information on your instructors repositories (hint: this is the url you want
"https://api.github.com/users/jtleek/repos").

Use this data to find the time that the datasharing repo was created. What time was it created?

This tutorial may be useful (https://github.com/hadley/httr/blob/master/demo/oauth2-github.r).

You may also need to run the code in the base R package and not R studio.

<u>answer</u>

```{r q1,eval = F}
library(httr)
oauth_endpoints("github")
myapp <- ooauth_app("github",
                    key = ....
                    secret = ...)
github_token <- oauth2.0_token(oauth_endpoints('github'),myapp)
request      <- GET("https://api.github.com/users/jtleek/repos", config(token = github_token))
stop_for_status(request)
output <- content(request)
datashare <- which(sapply(output, FUN=function(X) "datasharing" %in% X))
list(output[[output]]$name, output[[output]]$created_at)
```

## 2.

The **sqldf** package allows for execution of SQL commands on R data frames. We will use the
**sqldf** package to practice the queries we might send with the **dbSendQuery()** command in
**RMySQL**.

Download the American Community Survey data and load it into an R object called: *acs*

https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv

Which of the following commands will select only the data for the probability weights pwgtp1 with
ages less than 50?

<u>answer</u>

```{r 2,eval = FALSE}
library(sqldf)
file <- read.csv.sql("https://d396qusza40orc.cloudfront.net/getdata%2Fdata%2Fss06pid.csv")
# test options
sqldf("select * from file")
sqldf("select * from file where AGEP < 50 and pwgtp1")
sqldf("select pwgtp1 from file")
sqldf("select pwgtp1 from file where AGEP < 50")
# correct answer D
```

## 3.

Using the same data frame you created in the previous problem, what is the equivalent function to
unique(acs$AGEP)?

<u>answer</u>

```{r 3,eval = FALSE}
a <- unique(file$AGEP)
A <- sqldf("select AGEP where unique from acs")
identical(a, A$AGEP)
B <- sqldf("select distinct AGEP from acs")
identical(a, B$AGEP)
C <- sqldf("select distinct pwgtp1 from acs")
identical(a, C$AGEP)
D <- sqldf("select unique AGEP from acs")
identical(a, D$AGEP)
## correct answer B
```

## 4.

How many characters are in the 10th, 20th, 30th and 100th lines of HTML from this page:

http://biostat.jhsph.edu/~jleek/contact.html

(Hint: the nchar() function in R may be helpful)

<u>answer</u>

```{r 4,eval = F}
htmlurl <- url("http://biostat.jhsph.edu/~jleek/contact.html")
html    <- readLines(htmlurl)
close(htmlurl)
nchar(html[c(10,20,30,100)])
```

# 5.

Read this data set into R and report the sum of the numbers in the fourth of the nine columns.

https://d396qusza40orc.cloudfront.net/getdata%2Fwksst8110.for

Original source of the data: http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for

(Hint: this is a fixed width file format)

<u>answer</u>

```{r 5,eval = FALSE}
file  <- "https://d396qusza40orc.cloudfront.net/getdata%2Fwksst8110.for"
d     <- read.fwf(file, skip = 4, widths = c(12, 7, 4, 9, 4, 9, 4, 9, 4))
sum(d[,4])
## 32426.7
```